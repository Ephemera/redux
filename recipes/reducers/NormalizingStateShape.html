
<!DOCTYPE HTML>
<html lang="ko" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>상태 정규화하기(미번역) · Redux</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-algolia/plugin-algolia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="UpdatingNormalizedData.html" />
    
    
    <link rel="prev" href="BeyondCombineReducers.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="검색어 입력" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../introduction/">
            
                <a href="../../introduction/">
            
                    
                    소개
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../introduction/Motivation.html">
            
                <a href="../../introduction/Motivation.html">
            
                    
                    동기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../introduction/ThreePrinciples.html">
            
                <a href="../../introduction/ThreePrinciples.html">
            
                    
                    3가지 원칙
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../introduction/PriorArt.html">
            
                <a href="../../introduction/PriorArt.html">
            
                    
                    기존 기술들
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../introduction/Ecosystem.html">
            
                <a href="../../introduction/Ecosystem.html">
            
                    
                    생태계
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../introduction/Examples.html">
            
                <a href="../../introduction/Examples.html">
            
                    
                    예시
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../basics/">
            
                <a href="../../basics/">
            
                    
                    기초
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../basics/Actions.html">
            
                <a href="../../basics/Actions.html">
            
                    
                    액션
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../basics/Reducers.html">
            
                <a href="../../basics/Reducers.html">
            
                    
                    리듀서
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../basics/Store.html">
            
                <a href="../../basics/Store.html">
            
                    
                    스토어
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../basics/DataFlow.html">
            
                <a href="../../basics/DataFlow.html">
            
                    
                    데이터 흐름
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../basics/UsageWithReact.html">
            
                <a href="../../basics/UsageWithReact.html">
            
                    
                    React와 함께 사용하기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../basics/ExampleTodoList.html">
            
                <a href="../../basics/ExampleTodoList.html">
            
                    
                    예시: Todo List
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../advanced/">
            
                <a href="../../advanced/">
            
                    
                    심화
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../advanced/AsyncActions.html">
            
                <a href="../../advanced/AsyncActions.html">
            
                    
                    비동기 액션
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../advanced/AsyncFlow.html">
            
                <a href="../../advanced/AsyncFlow.html">
            
                    
                    비동기 흐름
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../advanced/Middleware.html">
            
                <a href="../../advanced/Middleware.html">
            
                    
                    미들웨어
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../advanced/UsageWithReactRouter.html">
            
                <a href="../../advanced/UsageWithReactRouter.html">
            
                    
                    React Router와 함께 사용하기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../advanced/ExampleRedditAPI.html">
            
                <a href="../../advanced/ExampleRedditAPI.html">
            
                    
                    예시: Reddit API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" >
            
                <span>
            
                    
                    다음 단계
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../">
            
                <a href="../">
            
                    
                    레시피
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../MigratingToRedux.html">
            
                <a href="../MigratingToRedux.html">
            
                    
                    Redux로 마이그레이션
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../UsingObjectSpreadOperator.html">
            
                <a href="../UsingObjectSpreadOperator.html">
            
                    
                    객체 확산 연산자 사용하기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../ReducingBoilerplate.html">
            
                <a href="../ReducingBoilerplate.html">
            
                    
                    보일러플레이트 줄이기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../ServerRendering.html">
            
                <a href="../ServerRendering.html">
            
                    
                    서버 렌더링(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../WritingTests.html">
            
                <a href="../WritingTests.html">
            
                    
                    테스트 작성(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../ComputingDerivedData.html">
            
                <a href="../ComputingDerivedData.html">
            
                    
                    파생된 데이터 다루기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../ImplementingUndoHistory.html">
            
                <a href="../ImplementingUndoHistory.html">
            
                    
                    실행취소 구현하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../IsolatingSubapps.html">
            
                <a href="../IsolatingSubapps.html">
            
                    
                    서브앱 분리하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../StructuringReducers.html">
            
                <a href="../StructuringReducers.html">
            
                    
                    리듀서 구성하기(미번역)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.9.1" data-path="PrerequisiteConcepts.html">
            
                <a href="PrerequisiteConcepts.html">
            
                    
                    사전에 요구되는 개념들(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.2" data-path="BasicReducerStructure.html">
            
                <a href="BasicReducerStructure.html">
            
                    
                    기본 리듀서 구조(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.3" data-path="SplittingReducerLogic.html">
            
                <a href="SplittingReducerLogic.html">
            
                    
                    리듀서 로직 분리하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.4" data-path="RefactoringReducersExample.html">
            
                <a href="RefactoringReducersExample.html">
            
                    
                    리듀서 예제 리팩토링하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.5" data-path="UsingCombineReducers.html">
            
                <a href="UsingCombineReducers.html">
            
                    
                    combineReducers 사용하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.6" data-path="BeyondCombineReducers.html">
            
                <a href="BeyondCombineReducers.html">
            
                    
                    combineReducers 더 알아보기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.9.7" data-path="NormalizingStateShape.html">
            
                <a href="NormalizingStateShape.html">
            
                    
                    상태 정규화하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.8" data-path="UpdatingNormalizedData.html">
            
                <a href="UpdatingNormalizedData.html">
            
                    
                    정규화된 데이터 업데이트하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.9" data-path="ReusingReducerLogic.html">
            
                <a href="ReusingReducerLogic.html">
            
                    
                    리듀서 로직 재사용하기(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.10" data-path="ImmutableUpdatePatterns.html">
            
                <a href="ImmutableUpdatePatterns.html">
            
                    
                    불변 업데이트 패턴(미번역)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9.11" data-path="InitializingState.html">
            
                <a href="InitializingState.html">
            
                    
                    상태 초기화하기(미번역)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../UsingImmutableJS.html">
            
                <a href="../UsingImmutableJS.html">
            
                    
                    Immutable.JS를 Redux와 사용하기(미번역)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../FAQ.html">
            
                <a href="../../FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../faq/General.html">
            
                <a href="../../faq/General.html">
            
                    
                    General
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../faq/Reducers.html">
            
                <a href="../../faq/Reducers.html">
            
                    
                    Reducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../faq/OrganizingState.html">
            
                <a href="../../faq/OrganizingState.html">
            
                    
                    Organizing State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../faq/StoreSetup.html">
            
                <a href="../../faq/StoreSetup.html">
            
                    
                    Store Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../../faq/Actions.html">
            
                <a href="../../faq/Actions.html">
            
                    
                    Actions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../../faq/ImmutableData.html">
            
                <a href="../../faq/ImmutableData.html">
            
                    
                    Immutable Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../../faq/CodeStructure.html">
            
                <a href="../../faq/CodeStructure.html">
            
                    
                    Code Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../../faq/Performance.html">
            
                <a href="../../faq/Performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../../faq/ReactRedux.html">
            
                <a href="../../faq/ReactRedux.html">
            
                    
                    React Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../../faq/Miscellaneous.html">
            
                <a href="../../faq/Miscellaneous.html">
            
                    
                    Miscellaneous
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../Troubleshooting.html">
            
                <a href="../../Troubleshooting.html">
            
                    
                    문제해결
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../Glossary.html">
            
                <a href="../../Glossary.html">
            
                    
                    용어사전
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../api/">
            
                <a href="../../api/">
            
                    
                    API 레퍼런스
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../api/createStore.html">
            
                <a href="../../api/createStore.html">
            
                    
                    createStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../../api/Store.html">
            
                <a href="../../api/Store.html">
            
                    
                    Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../../api/combineReducers.html">
            
                <a href="../../api/combineReducers.html">
            
                    
                    combineReducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../../api/applyMiddleware.html">
            
                <a href="../../api/applyMiddleware.html">
            
                    
                    applyMiddleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../../api/bindActionCreators.html">
            
                <a href="../../api/bindActionCreators.html">
            
                    
                    bindActionCreators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../../api/compose.html">
            
                <a href="../../api/compose.html">
            
                    
                    compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../CHANGELOG.html">
            
                <a href="../../CHANGELOG.html">
            
                    
                    변경 기록
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../PATRONS.html">
            
                <a href="../../PATRONS.html">
            
                    
                    후원자
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../../Feedback.html">
            
                <a href="../../Feedback.html">
            
                    
                    피드백
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            GitBook에 게시
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >상태 정규화하기(미번역)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="normalizing-state-shape">Normalizing State Shape</h1>
<p>Many applications deal with data that is nested or relational in nature.  For example, a blog editor could have many Posts, each Post could have many Comments, and both Posts and Comments would be written by a User.  Data for this kind of application might look like:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> blogPosts <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        id <span class="token punctuation">:</span> <span class="token string">&quot;post1&quot;</span><span class="token punctuation">,</span>
        author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        body <span class="token punctuation">:</span> <span class="token string">&quot;......&quot;</span><span class="token punctuation">,</span>
        comments <span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment1&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment2&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>    
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        id <span class="token punctuation">:</span> <span class="token string">&quot;post2&quot;</span><span class="token punctuation">,</span>
        author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        body <span class="token punctuation">:</span> <span class="token string">&quot;......&quot;</span><span class="token punctuation">,</span>
        comments <span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment3&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment4&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment5&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token punctuation">{</span>username <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">:</span> <span class="token string">&quot;User 3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>    
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// and repeat many times</span>
<span class="token punctuation">]</span>
</code></pre>
<p>Notice that the structure of the data is a bit complex, and some of the data is repeated.  This is a concern for several reasons:</p>
<ul>
<li>When a piece of data is duplicated in several places, it becomes harder to make sure that it is updated appropriately.</li>
<li>Nested data means that the corresponding reducer logic has to be more nested or more complex.  In particular, trying to update a deeply nested field can become very ugly very fast.</li>
<li>Since immutable data updates require all ancestors in the state tree to be copied and updated as well, and new object references will cause connected UI components to re-render, an update to a deeply nested data object could force totally unrelated UI components to re-render even if the data they&apos;re displaying hasn&apos;t actually changed.</li>
</ul>
<p>Because of this, the recommended approach to managing relational or nested data in a Redux store is to treat a portion of your store as if it were a database, and keep that data in a <em>normalized</em> form.  </p>
<h2 id="designing-a-normalized-state">Designing a Normalized State</h2>
<p>The basic concepts of normalizing data are:</p>
<ul>
<li>Each type of data gets its own &quot;table&quot; in the state.</li>
<li>Each &quot;data table&quot; should store the individual items in an object, with the IDs of the items as keys and the items themselves as the values.</li>
<li>Any references to individual items should be done by storing the item&apos;s ID.</li>
<li>Arrays of IDs should be used to indicate ordering.</li>
</ul>
<p>An example of a normalized state structure for the blog example above might look like:</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
    posts <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        byId <span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;post1&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;post1&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span>
                body <span class="token punctuation">:</span> <span class="token string">&quot;......&quot;</span><span class="token punctuation">,</span>
                comments <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;comment1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment2&quot;</span><span class="token punctuation">]</span>    
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;post2&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;post2&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span>
                body <span class="token punctuation">:</span> <span class="token string">&quot;......&quot;</span><span class="token punctuation">,</span>
                comments <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;comment3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment5&quot;</span><span class="token punctuation">]</span>    
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;post1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;post2&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    comments <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        byId <span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;comment1&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment1&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;comment2&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment2&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;comment3&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment3&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;comment4&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment4&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;comment5&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                id <span class="token punctuation">:</span> <span class="token string">&quot;comment5&quot;</span><span class="token punctuation">,</span>
                author <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span>
                comment <span class="token punctuation">:</span> <span class="token string">&quot;.....&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;comment1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;commment4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment5&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    users <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        byId <span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;user1&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                username <span class="token punctuation">:</span> <span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span>
                name <span class="token punctuation">:</span> <span class="token string">&quot;User 1&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            <span class="token string">&quot;user2&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                username <span class="token punctuation">:</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span>
                name <span class="token punctuation">:</span> <span class="token string">&quot;User 2&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            <span class="token string">&quot;user3&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                username <span class="token punctuation">:</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">,</span>
                name <span class="token punctuation">:</span> <span class="token string">&quot;User 3&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user3&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This state structure is much flatter overall.  Compared to the original nested format, this is an improvement in several ways:</p>
<ul>
<li>Because each item is only defined in one place, we don&apos;t have to try to make changes in multiple places if that item is updated.</li>
<li>The reducer logic doesn&apos;t have to deal with deep levels of nesting, so it will probably be much simpler.</li>
<li>The logic for retrieving or updating a given item is now fairly simple and consistent.  Given an item&apos;s type and its ID, we can directly look it up in a couple simple steps, without having to dig through other objects to find it.</li>
<li>Since each data type is separated, an update like changing the text of a comment would only require new copies of the &quot;comments &gt; byId &gt; comment&quot; portion of the tree.  This will generally mean fewer portions of the UI that need to update because their data has changed.  In contrast, updating a comment in the original nested shape would have required updating the comment object, the parent post object, the array of all post objects, and likely have caused <em>all</em> of the Post components and Comment components in the UI to re-render themselves.</li>
</ul>
<p>Note that a normalized state structure generally implies that more components are connected and each component is responsible for looking up its own data, as opposed to a few connected components looking up large amounts of data and passing all that data downwards.  As it turns out, having connected parent components simply pass item IDs to connected children is a good pattern for optimizing UI performance in a React Redux application, so keeping state normalized plays a key role in improving performance.</p>
<h2 id="organizing-normalized-data-in-state">Organizing Normalized Data in State</h2>
<p>A typical application will likely have a mixture of relational data and non-relational data.  While there is no single rule for exactly how those different types of data should be organized, one common pattern is to put the relational &quot;tables&quot; under a common parent key, such as &quot;entities&quot;.  A state structure using this approach might look like:</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
    simpleDomainData1<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    simpleDomainData2<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    entities <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        entityType1 <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        entityType2 <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    ui <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        uiSection1 <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        uiSection2 <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This could be expanded in a number of ways.  For example, an application that does a lot of editing of entities might want to keep two sets of &quot;tables&quot; in the state, one for the &quot;current&quot; item values and one for the &quot;work-in-progress&quot; item values.  When an item is edited, its values could be copied into the &quot;work-in-progress&quot; section, and any actions that update it would be applied to the &quot;work-in-progress&quot; copy, allowing the editing form to be controlled by that set of data while another part of the UI still refers to the original version.  &quot;Resetting&quot; the edit form would simply require removing the item from the &quot;work-in-progress&quot; section and re-copying the original data from &quot;current&quot; to &quot;work-in-progress&quot;, while &quot;applying&quot; the edits would involve copying the values from the &quot;work-in-progress&quot; section to the &quot;current&quot; section.</p>
<h2 id="relationships-and-tables">Relationships and Tables</h2>
<p>Because we&apos;re treating a portion of our Redux store as a &quot;database&quot;, many of the principles of database design also apply here as well.  For example, if we have a many-to-many relationship, we can model that using an intermediate table that stores the IDs of the corresponding items (often known as a &quot;join table&quot; or an &quot;associative table&quot;).  For consistency, we would probably also want to use the same <code>byId</code> and <code>allIds</code> approach that we used for the actual item tables, like this:</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
    entities<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        authors <span class="token punctuation">:</span> <span class="token punctuation">{</span> byId <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        books <span class="token punctuation">:</span> <span class="token punctuation">{</span> byId <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        authorBook <span class="token punctuation">:</span> <span class="token punctuation">{</span>
            byId <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    id <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    authorId <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
                    bookId <span class="token punctuation">:</span> <span class="token number">22</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    id <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                    authorId <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
                    bookId <span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
                <span class="token number">3</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    id <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                    authorId <span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
                    bookId <span class="token punctuation">:</span> <span class="token number">12</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            allIds <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Operations like &quot;Look up all books by this author&quot; can then accomplished with a single loop over the join table.  Given the typical amounts of data in a client application and the speed of Javascript engines, this kind of operation is likely to have sufficiently fast performance for most use cases.</p>
<h2 id="normalizing-nested-data">Normalizing Nested Data</h2>
<p>Because APIs frequently send back data in a nested form, that data needs to be transformed into a normalized shape before it can be included in the state tree.  The <a href="https://github.com/paularmstrong/normalizr" target="_blank">Normalizr</a> library is usually used for this task.  You can define schema types and relations, feed the schema and the response data to Normalizr, and it will output a normalized transformation of the response.  That output can then be included in an action and used to update the store.  See the Normalizr documentation for more details on its usage.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
    
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            

    
    <div class="powered-by-algolia">
        powered by <a href="https://algolia.com" target="_blank"><img src="../../gitbook/gitbook-plugin-algolia/algolia-logo.jpg" /></a>
    </div>
    

        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="BeyondCombineReducers.html" class="navigation navigation-prev " aria-label="Previous page: combineReducers 더 알아보기(미번역)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="UpdatingNormalizedData.html" class="navigation navigation-next " aria-label="Next page: 정규화된 데이터 업데이트하기(미번역)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"상태 정규화하기(미번역)","level":"1.5.9.7","depth":3,"next":{"title":"정규화된 데이터 업데이트하기(미번역)","level":"1.5.9.8","depth":3,"path":"recipes/reducers/UpdatingNormalizedData.md","ref":"recipes/reducers/UpdatingNormalizedData.md","articles":[]},"previous":{"title":"combineReducers 더 알아보기(미번역)","level":"1.5.9.6","depth":3,"path":"recipes/reducers/BeyondCombineReducers.md","ref":"recipes/reducers/BeyondCombineReducers.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","algolia"],"root":"./docs_kr","styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/reactjs/redux/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"algolia":{"freeAccount":"false","index":"redux-docs","applicationID":"BC2QB3G2G4","publicKey":"75eb88bb56d8cf8d17b6366a2c8e5fcd"},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/dobbit/redux/tree/master"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Redux","language":"ko","gitbook":"3.2.2"},"file":{"path":"recipes/reducers/NormalizingStateShape.md","mtime":"2017-04-05T02:50:08.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-17T11:40:28.581Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-algolia/search-algolia.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

